<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator Break Depo Bank WM</title>
    
    <!-- Library Eksternal -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Menghubungkan file CSS eksternal -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="text-slate-800">

    <div id="app" class="max-w-md mx-auto min-h-screen bg-white shadow-2xl flex flex-col relative overflow-hidden">
        
        <!-- HEADER -->
        <header class="bg-navy-gradient text-white p-5 sticky top-0 z-50 shadow-xl border-b border-white/10">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 flex items-center justify-center text-2xl bg-white/10 rounded-full backdrop-blur-sm shadow-inner">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <div class="flex flex-col">
                        <h1 id="headerTitle" class="text-base font-extrabold leading-none tracking-tight">Kalkulator Break Depo Bank WM</h1>
                    </div>
                </div>
                <button onclick="toggleViewAuto()" class="w-10 h-10 flex items-center justify-center bg-white/10 rounded-xl hover:bg-white/20 transition active:scale-90 shadow-lg border border-white/5">
                    <i id="navIcon" class="fas fa-history text-sm text-blue-200"></i>
                </button>
            </div>
        </header>

        <div id="content" class="flex-1 overflow-y-auto bg-slate-50/20">
            <!-- VIEW: KALKULATOR -->
            <div id="calcView" class="p-6 space-y-6 fade-in">
                <div class="space-y-5">
                    <!-- Nominal Deposito -->
                    <div class="space-y-1.5">
                        <label class="text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1 text-left block">Nominal Deposito</label>
                        <div class="relative">
                            <span class="absolute left-4 top-3.5 font-black text-blue-800 text-sm">Rp</span>
                            <input type="text" id="nominal" inputmode="numeric" oninput="formatInput(this)" class="w-full pl-11 pr-4 py-3.5 bg-white concave-input rounded-2xl font-bold text-base transition-all placeholder-slate-300 outline-none" placeholder="0">
                        </div>
                    </div>

                    <!-- Tanggal -->
                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-1.5 text-left">
                            <label class="text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1">Tanggal Tanam</label>
                            <input type="date" id="tglTanam" class="w-full p-3.5 bg-white concave-input rounded-2xl font-bold text-xs outline-none">
                        </div>
                        <div class="space-y-1.5 text-left">
                            <label class="text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1">Tanggal Break</label>
                            <input type="date" id="tglBreak" class="w-full p-3.5 bg-white concave-input rounded-2xl font-bold text-xs outline-none">
                        </div>
                    </div>

                    <!-- Jangka Waktu Awal -->
                    <div class="space-y-1.5 text-left">
                        <label class="text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1">Jangka Waktu Awal</label>
                        <select id="tenor" class="w-full p-3.5 bg-white concave-input rounded-2xl font-extrabold text-sm outline-none appearance-none custom-select-icon">
                            <option value="">Pilih Tenor</option>
                            <option value="1">1 Bulan</option>
                            <option value="3">3 Bulan</option>
                            <option value="6">6 Bulan</option>
                            <option value="12">12 Bulan</option>
                            <option value="24">24 Bulan</option>
                            <option value="36">36 Bulan</option>
                            <option value="60">60 Bulan</option>
                        </select>
                    </div>

                    <!-- Re-Invest -->
                    <div class="p-5 bg-white rounded-[2rem] border border-slate-100 shadow-sm space-y-4 text-left">
                        <div class="flex items-center gap-3 cursor-pointer" onclick="toggleReinvest()">
                            <div id="checkReinvest" class="w-6 h-6 rounded-lg border-2 bg-slate-50 border-slate-200 transition flex items-center justify-center text-white text-[12px] shadow-sm">âœ“</div>
                            <span class="text-[13px] font-black text-slate-700">Pencairan Re-Invest</span>
                        </div>
                        <div id="reinvestOptions" class="hidden space-y-4 pt-4 border-t border-slate-50">
                            <div class="flex gap-6">
                                <label class="flex items-center gap-2.5 cursor-pointer text-xs font-black text-slate-500">
                                    <input type="radio" name="reType" value="all" checked onclick="handleReType('all')" class="w-4 h-4 accent-blue-600"> Seluruhnya
                                </label>
                                <label class="flex items-center gap-2.5 cursor-pointer text-xs font-black text-slate-500">
                                    <input type="radio" name="reType" value="partial" onclick="handleReType('partial')" class="w-4 h-4 accent-blue-600"> Sebagian
                                </label>
                            </div>
                            <div id="partialInput" class="hidden">
                                <div class="relative">
                                    <span class="absolute left-3 top-2.5 font-black text-blue-800 text-[10px]">Rp</span>
                                    <input type="text" id="nominalReinvest" inputmode="numeric" oninput="formatInput(this)" class="w-full pl-8 pr-4 py-3 bg-slate-50 concave-input rounded-2xl text-sm font-bold" placeholder="Nominal Baru">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="grid grid-cols-2 gap-4 pt-2">
                    <button onclick="resetApp()" class="py-4 bg-slate-100 text-slate-500 font-black rounded-2xl hover:bg-slate-200 transition text-xs uppercase tracking-widest">Reset</button>
                    <button onclick="calculate()" class="py-4 emboss-btn text-white font-black rounded-2xl text-xs uppercase tracking-widest">Hitung Break</button>
                </div>

                <!-- HASIL -->
                <div id="resultCard" class="hidden bg-white rounded-[3rem] p-7 border border-blue-50 shadow-2xl space-y-7 fade-in relative overflow-hidden text-left">
                    <div class="absolute top-0 left-0 w-full h-1.5 bg-blue-700"></div>
                    <div class="text-center space-y-1">
                        <p class="text-[10px] font-black text-slate-400 uppercase tracking-[0.3em]">Estimasi Pencairan Bersih</p>
                        <h2 id="resTotal" class="text-3xl font-black text-blue-900 no-wrap tracking-tighter">Rp 0</h2>
                        <div id="resTotalBenefit" class="text-[10px] text-slate-400 mt-2 font-bold italic opacity-80 leading-relaxed px-2"></div>
                    </div>

                    <div class="space-y-4">
                        <div class="flex justify-between text-[11px] items-center"><span class="text-slate-500 font-bold uppercase tracking-widest">Umur Deposito</span><span id="resUmur" class="font-black text-slate-900 text-right">-</span></div>
                        <div class="flex justify-between text-[11px] items-center text-red-600"><span id="penaltyLabel" class="font-bold uppercase tracking-widest">Denda Penalty</span><span id="resPenalty" class="font-black">-</span></div>
                        <div class="flex justify-between text-[11px] text-red-600 border-b border-slate-100 pb-5 items-start">
                            <div class="flex flex-col text-left">
                                <span class="font-bold uppercase tracking-widest leading-none text-left">Kelebihan Bunga</span>
                                <span class="text-[9px] opacity-60 italic mt-1 text-left">(Wajib Dikembalikan)</span>
                            </div>
                            <div class="flex flex-col items-end">
                                <span id="resReversal" class="font-black text-lg">-</span>
                                <button id="detailToggleBtn" onclick="toggleDetails()" class="text-[11px] text-blue-700 font-black mt-2 underline flex items-center gap-1 hover:text-blue-950 transition">
                                    <span>Lihat Rincian</span> <i class="fas fa-chevron-down text-[8px]"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Rincian Dropdown -->
                        <div id="details" class="hidden px-2.5 py-5 bg-blue-50/50 rounded-[2rem] text-[11px] space-y-4 border border-blue-100/50 fade-in">
                            <div class="p-3.5 mx-1 bg-white rounded-2xl font-bold border border-blue-100 shadow-sm leading-tight text-blue-900 flex flex-col text-left">
                                <span class="text-[9px] opacity-50 uppercase font-black tracking-widest">Memo Suku Bunga:</span>
                                <span id="detMemo" class="text-[11px] font-extrabold mt-1">-</span>
                            </div>
                            <div class="bg-white rounded-2xl border border-slate-100 overflow-hidden shadow-sm mx-1">
                                <table class="w-full detail-table text-[10px]">
                                    <thead class="bg-slate-50 text-slate-400 font-black uppercase text-[8px] tracking-wider">
                                        <tr>
                                            <td>Periode</td>
                                            <td class="text-center">Tenor</td>
                                            <td class="text-right">Bunga</td>
                                        </tr>
                                    </thead>
                                    <tbody id="detTableBody" class="text-slate-600"></tbody>
                                </table>
                            </div>
                            <div class="p-4 mx-1 bg-white rounded-2xl border border-slate-100 space-y-2.5 shadow-sm">
                                <div class="flex justify-between text-slate-500 font-bold"><span>Bunga Sudah Dibayar</span><span id="detBungaPaid" class="text-slate-900 font-black">-</span></div>
                                <div class="flex justify-between text-slate-500 font-bold"><span>Bunga Seharusnya</span><span id="detBungaSeharusnya" class="text-emerald-600 font-black">-</span></div>
                                <div class="pt-3 border-t border-slate-100 flex justify-between items-center">
                                    <span class="uppercase text-[9px] font-black tracking-widest text-slate-900">Total Selisih</span>
                                    <span id="detTotalDiff" class="text-red-600 font-black text-base">-</span>
                                </div>
                            </div>
                            <p class="text-[8px] text-slate-400 italic text-center leading-relaxed opacity-80 font-medium px-2">
                                * Sisa masa < 1 bulan = 0%.<br>
                                * Rumus harian 365 hari (366 untuk kabisat)
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: HISTORY -->
            <div id="historyView" class="hidden p-6 space-y-5 fade-in text-left">
                <div class="p-5 bg-blue-50 text-blue-900 rounded-[1.5rem] flex gap-3 items-start border border-blue-100 shadow-sm">
                    <i class="fas fa-info-circle mt-1 text-blue-400"></i>
                    <p class="text-xs leading-relaxed font-bold">Daftar histori memo suku bunga. Perhitungan merujuk pada memo saat Tanggal Tanam.</p>
                </div>
                <div id="historyList" class="space-y-4"></div>
            </div>
        </div>

        <!-- FOOTER -->
        <footer class="bg-navy-gradient text-white p-6 text-center shrink-0 border-t border-white/10 shadow-[0_-4px_15px_rgba(0,0,0,0.2)]">
            <div class="flex items-center justify-center gap-3 group">
                <div class="w-8 h-8 border-2 border-white/40 rounded-full flex items-center justify-center font-black text-[10px] bg-white/5 shadow-inner">BD</div>
                <div class="text-xs font-black tracking-[0.2em] uppercase">Bizdev Bank WM</div>
            </div>
        </footer>
    </div>

    <!-- Menghubungkan file JavaScript eksternal -->
    <script src="app.js"></script>
</body>
</html>
